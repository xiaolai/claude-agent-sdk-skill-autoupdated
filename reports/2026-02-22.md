# Daily Report — 2026-02-22

## Summary

Research-only run (no upstream SDK version changes detected). Both TS and Python research agents completed successfully, evaluating 26 issues total (18 TS, 8 PY). Two new Known Issues were added: TS #29 (HookCallbackMatcher timeout cannot be disabled) and PY #16 (session file not flushed before disconnect). The typecheck step reported a failure (exit code 1) due to a malformed import statement generated by the template check script — a stray comma in `(,AgentDefinition,...` — though the pipeline outcomes object incorrectly records this step as "success". No SDK version changes were applied.

## Pipeline Status

| Step | Result | Duration | Notes |
|------|--------|----------|-------|
| Monitor | success | 4s | No upstream changes detected |
| Auth | success | — | |
| Research (TS) | success | 281s | 18 issues evaluated, 1 new KI added |
| Research (PY) | success | 536s | 8 issues evaluated, 1 new KI added |
| Typecheck | **failed** | 11s | Exit code 1 — stray comma in generated import check (see Errors) |
| Update | skipped | — | No version changes detected |
| Verify | skipped | — | Update skipped |
| Report | running | — | |

_Note: The pipeline `outcomes` object records `typecheck: "success"`, which contradicts the step's `result: "failed"` and `exitCode: 1`. The step-level data is authoritative._

## Monitor

- **Changes detected**: no
- No upstream changes detected for either TypeScript SDK (v0.2.50) or Python SDK (v0.1.39).

## Research

### TypeScript SDK — 18 issues evaluated

| Issue | Title | Verdict | Reason |
|-------|-------|---------|--------|
| #177 | unstable_v2 session close() breaks persistence | already_documented | KI #25 |
| #178 | POST /v1/messages async? | skipped | General question, closed |
| #179 | Missing @anthropic-ai/sdk (pnpm) | **updated_existing** | Added pnpm `packageExtensions` workaround to KI #8 |
| #180 | query() adaptive thinking | skipped | Fixed in v0.2.40; covered by KI #13 note |
| #181 | SDKMessage resolves to any | already_documented | KI #24 |
| #182 | Opus 4.6 effort control | already_documented | KI #28 |
| #183 | type: 'url' MCP servers fail silently | skipped | Already in rules; 0 reactions |
| #184 | SDKRateLimitEvent type missing v0.2.45 | already_documented | KI #24 |
| #185 | promptSuggestion() not in npm package | already_documented | KI #23 |
| #186 | Context usage info inaccessible | already_documented | KI #26 |
| #187 | Large MCP tool result: single-line file | already_documented | KI #22 |
| #188 | 1-hour cache TTL default | skipped | No workaround; 0 reactions |
| #189 | Task tool force-allowed for subagents | already_documented | KI #19 |
| #190 | No way to disable cloud MCP auto-discovery | already_documented | KI #27 |
| #191 | Bash tool slow (3m for python command) | skipped | Environment-specific; 0 reactions |
| #192 | Random UUID busts input cache | skipped | No user workaround; 0 reactions |
| #193 | fallbackModel not passed on streaming fallback | skipped | No user workaround; 0 reactions |
| #194 | HookCallbackMatcher timeout cannot be disabled | **added_known_issue** | KI #29 — interactive hooks always time out at 60s |

**New KI added**: #29 — `HookCallbackMatcher timeout?: number` cannot be set to `null`/`undefined` to disable; truthy check means all values ≤0 fall back to 60s default. Workaround: set `timeout: 86400`.

**Existing KI updated**: #8 — added pnpm `packageExtensions` workaround for strict peer dep resolution.

### Python SDK — 8 issues evaluated

| Issue | Title | Verdict | Reason |
|-------|-------|---------|--------|
| #529 | PR: capture actual stderr in ProcessError | updated_existing | PR that fixes KI #17; referenced in KI #17 docs |
| #555 | Session resume silently creates new session | updated_existing | Related to KI #16; referenced in KI #16 docs |
| #581 | Add context_management as first-class option | skipped | Feature request; 0 reactions |
| #583 | MessageParseError on rate_limit_event (closed) | updated_existing | Closed (PR #598 merged); KI #15 updated with current tracking issue |
| #584 | Session file not flushed before disconnect | **added_known_issue** | KI #16 — flush timing causes resume failures |
| #597 | SDK MCP servers invisible with string prompts | updated_existing | Broader scope than #578; KI #14 title and causes updated (3 root causes now) |
| #601 | MessageParseError rate_limit_event (open) | updated_existing | Current open tracking issue for KI #15 |
| #602 | Custom local plugins not showing | skipped | Desktop UI issue; 0 reactions; no SDK workaround |

**New KI added**: #16 — Session file not flushed before disconnect; session file write is async and not awaited, causing resume failures when process exits quickly after query completes.

**Existing KIs updated**: #14 (broader scope: 3 root causes for SDK MCP string prompt failures), #15 (linked to current open issue #601), #17 (linked to fix PR #529).

## Errors

### Typecheck — exit code 1

**Last output**:
```
  OK:   query_with_tools.py — valid syntax
  OK:   sandbox_config.py — valid syntax
  OK:   session_management.py — valid syntax
  OK:   structured_output.py — valid syntax
  OK:   subagents_orchestration.py — valid syntax

=== Python import resolution check ===
  File "<string>", line 1
    from claude_agent_sdk import (,AgentDefinition,ClaudeAgentOptions,...
                                  ^
SyntaxError: invalid syntax
  FAIL: Some template imports don't resolve
  FAIL:   Cannot import: (

=========================================
  Passed: 13
  Failed: 2
=========================================

TEMPLATE CHECK FAILED — 2 issue(s)
```

**Likely cause**: The template check script generates a Python import statement dynamically by joining symbol names, producing `(,AgentDefinition,...` — a stray leading comma in the parenthesized import list. This is a bug in the import-check generator script, not in the SDK or skill files. The actual Python skill templates all pass syntax checks.

**Suggested fix**: Inspect the template check script's import list construction; ensure the join produces `(AgentDefinition,...` not `(,AgentDefinition,...`. The leading `(` should not be followed by a comma.

## Cost

| Agent | Cost | Turns |
|-------|------|-------|
| Research (TS) | $2.24 | 61 |
| Research (PY) | $2.67 | 90 |
| Report | N/A | — |
| **Total** | **$4.91+** | |

## State

Current tracked state after today's run:

- **TypeScript SDK version**: 0.2.50 (unchanged)
- **Python SDK version**: 0.1.39 (unchanged)
- **Last scanned TS issue**: #194
- **Last scanned PY issue**: #602
- **TS Known Issues tracked**: #2–#19, #21–#29 (29 total)
- **PY Known Issues tracked**: #1–#17
- **Total TS issues researched today**: 18 (issues #177–#194)
- **Total PY issues researched today**: 8 (issues #529, #555, #581–#584, #597, #601–#602)
