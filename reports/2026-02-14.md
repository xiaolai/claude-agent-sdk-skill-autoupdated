# Daily Report — 2026-02-14

## Summary

Research-only run with significant Python SDK findings. No upstream version changes detected. Research agents evaluated 14 Python issues, adding 9 new Known Issues (#1–#9) covering critical production bugs (Query.close() hangs, FastAPI compatibility), common pitfalls (allowed_tools=[] treated as falsy), and template code quality issues. Applied 5 template fixes replacing deprecated dict-style message access with isinstance checks. TypeScript SDK research ran successfully with no changes.

## Pipeline Status

| Step | Result | Duration | Notes |
|------|--------|----------|-------|
| Monitor | success | 3s | No upstream changes detected |
| Auth | success | — | Authentication verified |
| Research (TS) | success | 161s | No new issues found |
| Research (PY) | success | 379s | 14 issues researched, 9 added as known issues |
| Typecheck | success | 5s | All files valid |
| Update | skipped | — | No version changes to process |
| Verify | skipped | — | No update to verify |

## Monitor

- **Changes detected**: No
- No upstream changes detected in TypeScript SDK (npm), Python SDK (PyPI), or GitHub repositories
- SDK versions remain stable: TypeScript v0.2.42, Python v0.1.36

## Research

### TypeScript SDK

- **Status**: Success
- **Issues evaluated**: 0
- **Changes**: None
- **Duration**: 161s
- **Notes**: No new issues found since last scan (issue #176)

### Python SDK

- **Status**: Success
- **Issues evaluated**: 14 (issues #554, #523, #567, #571, #10, #378, #462, #316, #553, #337, #374, #502, #510, and externals)
- **Known Issues added**: 9 new issues (#1–#9)
- **Template fixes applied**: 5 files updated

#### New Known Issues Added

1. **#554 — Hook callback errors (Stream closed)**: Cosmetic error in bypassPermissions mode since v0.1.29, workaround exists
2. **#523 — allowed_tools=[] treated as falsy**: Common pitfall, use None instead of empty list
3. **#567 — Sub-agents not getting registered**: Silent failure with large system prompts
4. **#571 — StructuredOutput validation fails**: Agent wraps output in {"output": {...}}, breaking schema
5. **#10 — cwd option ignored**: High-impact issue (13 reactions), affects macOS users
6. **#378 — Query.close() hangs with 100% CPU**: Critical production bug, requires timeout wrapper
7. **#462 — FastAPI context issue**: SDK fails in FastAPI/Uvicorn (5 reactions), no workaround yet
8. **#316 — PreToolUse hooks skipped for non-existent files**: Contradicts documentation
9. **#553 — Thinking blocks missing with Opus 4.6**: Fixed in v0.1.36, documented for reference

#### Issues Updated

- **#337** — Linked to existing Known Issue #3 (sub-agents not registered, same root cause as #567)
- **#374** — Linked to existing Known Issue #4 (StructuredOutput validation, related to #571)

#### Issues Skipped

- **#502** — Duplicate of #571
- **#510** — Closed, likely fixed

#### Template Code Quality

Fixed 5 Python template files to use proper SDK v0.1.36 message types:
- `permission_control.py` — replaced dict-style access with isinstance checks
- `error_handling.py` — proper SystemMessage/ResultMessage handling
- `multi_agent_workflow.py` — AssistantMessage/TextBlock type checking
- `session_management.py` — SystemMessage/ResultMessage type safety
- `subagents_orchestration.py` — ResultMessage type checking

#### Documentation Updates

- **SKILL-python.md**: Added 5 new Known Issue entries (#5–#9) with reproduction steps and workarounds
- **rules/claude-agent-sdk-py.md**: Added Query.close() timeout rule with code examples

## Cost

| Agent | Cost | Turns |
|-------|------|-------|
| Research (TS) | $1.22 | 45 |
| Research (PY) | $2.69 | 100 |
| Report | $0.15 | 4 |
| **Total** | **$4.06** | |

## State

Current tracked state after today's run:

### TypeScript SDK
- **Version**: v0.2.42
- **Tracked issues**: 19 issues mapped to 19 Known Issues
- **Last scanned**: Issue #176
- **Peer dependencies**: zod ^4.0.0
- **Node version**: >=18.0.0

### Python SDK
- **Version**: v0.1.36
- **Tracked issues**: 13 issues tracked (9 new Known Issues added today)
- **Last scanned**: Issue #572
- **Last audit**: 2026-02-14
  - SDK version audited: v0.1.36
  - API changes: None (no new options/methods/message types/hooks)
  - Issues researched: 14
  - Known Issues added: 9 (cumulative total now at 9)
  - Template fixes: 5 files updated

### Files Modified (Uncommitted)

All changes from today's research are staged but not yet committed:

- `SKILL-python.md` — 5 new Known Issue sections
- `agent/state.json` — 13 new tracked Python issues, audit metadata
- `rules/claude-agent-sdk-py.md` — Query.close() timeout rule
- `templates/python/error_handling.py` — isinstance-based message handling
- `templates/python/multi_agent_workflow.py` — proper type checking
- `templates/python/permission_control.py` — ResultMessage type usage
- `templates/python/session_management.py` — SystemMessage/ResultMessage types
- `templates/python/subagents_orchestration.py` — ResultMessage type checking
